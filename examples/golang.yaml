#syntax=cdupuis/dta-build:v1

vars:
  GO_VERSION: 1.23.4

contents:
  repositories:
    - https://dl-cdn.alpinelinux.org/alpine/v3.21/main
  packages:
    - ca-certificates=20241010-r0
    - busybox=1.37.0-r9
  files:
    linux/arm64:
      - url: https://go.dev/dl/go${GO_VERSION}.linux-arm64.tar.gz
        path: /usr/local
        checksum: sha256:16e5017863a7f6071363782b1b8042eb12c6ca4f4cd71528b2123f0a1275b13e
    linux/amd64:
      - url: https://go.dev/dl/go${GO_VERSION}.linux-amd64.tar.gz
        path: /usr/local
        checksum: sha256:6924efde5de86fe277676e929dc9917d466efa02fb934197bc2eba35d5680971

annotations:
  org.opencontainers.image.source: https://github.com/cdupuis/dta-golang
  org.opencontainers.image.version: ${GO_VERSION}
  org.opencontainers.image.licenses: BSD-3-Clause
  org.opencontainers.image.description: A minimal Golang image
  org.opencontainers.image.url: https://golang.org

environment:
  PATH: /go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
  GOLANG_VERSION: ${GO_VERSION}
  GOTOOLCHAIN: local
  GOPATH: /go

entrypoint:
  - go  
cmd: 
  - version